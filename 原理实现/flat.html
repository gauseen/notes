<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>flat</title>
</head>
<body>
<script type="text/javascript">
  let arr = [1, [2, 3], 4, [5, 6, [7, 8]]]

  const flat2 = (arr, maxLevel = 1) => {
    return arr.reduce((acc, current) => {
      let result = Array.isArray(current) && maxLevel > 0 ? flat2(current, maxLevel - 1) : [current]
      return [...acc, ...result]
    }, [])
  }

  // let r = flat2(arr)
  // console.log(r)

  const flat3 = (arr, result = []) => {
    for (let i = 0; i < arr.length; i++) {
      let item = arr[i]
      if (Array.isArray(item)) {
        result = [...result, ...flat3(item)]
      } else {
        result.push(item)
      }
    }
    return result
  }

  const flat6 = (arr, result = []) => {
    for (current of arr) {
      if (Array.isArray(current)) {
        flat2(current, result)
      } else {
        result.push(current)
      }
    }
    return result
  }

  let r3 = flat3(arr)
  console.log(r3)
</script>
</body>
</html>
